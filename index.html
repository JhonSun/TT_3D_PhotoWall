<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>糖糖的3D旋转照片墙</title>
		<link rel="stylesheet" href="img/CSS.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="css/css.css">
		<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script> 
		<script type="text/javascript" src="js/TweenMax.min.js"></script>
	</head>
	<body>
		<div class="wrap">
			<div class="cube">
				<div class="out_front">
					<img src="img/1.jpg" class="pic">
				</div>
				
				<div class="out_back">
					<img src="img/2.jpg" class="pic">
				</div>
				
				<div class="out_left">
					<img src="img/3.jpg" class="pic">
				</div>
				<div class="out_right">
					<img src="img/4.jpg" class="pic">
				</div>
				<div class="out_top">
					<img src="img/5.jpg" class="pic">
				</div>
				<div class="out_bottom">
					<img src="img/6.jpg" class="pic">
				</div>
				
				<span class="in_front">
					<img src="img/7.jpg" class="in_pic">
				</span>
				<span class="in_back">
					 <img src="img/8.jpg" class="in_pic">
				</span>
				<span class="in_left">
					<img src="img/9.jpg" class="in_pic">
				</span>
				<span class="in_right">
					<img src="img/10.jpg" class="in_pic">
				</span>
				<span class="in_top">
					<img src="img/11.jpg" class="in_pic">
				</span>
				<span class="in_bottom">
					<img src="img/12.jpg" class="in_pic">
				</span>
			</div>
		</div>
		<div class="player">
		  <div class="player__bar">
		    <div class="player__album">
		      <div class="player__albumImg active-song" 
		                data-author="Khalid"
		                data-song="Location"
		                data data-src="mp3.mp3" style="background-image: url(img/a1.png)"> </div>
		      <div class="player__albumImg" 
		                data-author="Khalid"
		                data-song="Angels"
		                data data-src="http://music.dawnfoxes.com/_fxs_/_upls_/_sngs_/USA/khalid-angels.mp3" style="background-image: url(img/a1.png)"> </div>
		    </div>
		    <div class="player__controls">
		      <div class="player__play">
		        <svg class="icon play" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
		          <path d="M51.109 30.335l-36-24A2 2 0 0 0 12 8v48a2.003 2.003 0 0 0 2 2c.388 0 .775-.113 1.109-.336l36-24a2 2 0 0 0 0-3.329z"/>
		        </svg>
		        <svg class="icon pause" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
		          <path d="M22.537 8.046h17.791c1.104 0 2.003.898 2.003 1.993v79.912a2.005 2.005 0 0 1-2.003 2.003h-17.79a2.005 2.005 0 0 1-2.003-2.003V10.04c0-1.095.898-1.993 2.002-1.993zM59.672 8.046h17.8c1.095 0 1.993.898 1.993 1.993v79.912a2.003 2.003 0 0 1-1.993 2.003h-17.8a1.997 1.997 0 0 1-1.993-2.003V10.04c0-1.095.889-1.993 1.993-1.993z"/>
		        </svg>
		      </div>
		    </div>
		  </div>
		  <div class="player__timeline">
		    <p class="player__author"></p>
		    <p class="player__song"></p>
		    <div class="player__timelineBar">
		      <div id="playhead"></div>
		    </div>
		  </div>
		</div>

<script>
  $(document).ready(function () {
    var audioElement = document.createElement('audio');
    audioElement.setAttribute('src', $('.active-song').attr('data-src'));

    var tl = new TimelineMax();
    tl.to('.player__albumImg', 3, {
        rotation: '360deg',
        repeat: -1,
        ease: Power0.easeNone
    }, '-=0.2');
    tl.pause();

    $('.player__play').click(function () {
		playOrPause();
    });


    var playhead = document.getElementById("playhead");
    audioElement.addEventListener("timeupdate", function () {
        var duration = this.duration;
        var currentTime = this.currentTime;
        var percentage = (currentTime / duration) * 100;
        playhead.style.width = percentage * 4 + 'px';
    });

    function updateInfo() {
        $('.player__author').text($('.active-song').attr('data-author'));
        $('.player__song').text($('.active-song').attr('data-song'));
    }
    updateInfo();

    function playOrPause() {
    	if ($('.player').hasClass('play')) {
            $('.player').removeClass('play');
            audioElement.pause();
            TweenMax.to('.player__albumImg', 0.2, {
                scale: 1,
                ease: Power0.easeNone
            })
            tl.pause();
        } else {
            $('.player').addClass('play');
            audioElement.play();
            TweenMax.to('.player__albumImg', 0.2, {
                scale: 1.1,
                ease: Power0.easeNone
            })
            tl.resume();
        }
    }

    playOrPause();
});
</script>
	</body>
</html>